<div class="app-container">
  <header class="header">
    <h1 class="title">{{ title() }}</h1>
    <p class="subtitle">Your step-by-step guide to creating and scaling profitable social media accounts</p>

    <div class="header-actions">
      <div class="jump-to-step">
        <input
          type="number"
          [(ngModel)]="jumpToStepNumber"
          placeholder="Enter step number"
          class="step-input"
          min="1"
          [max]="steps.length"
          (keyup.enter)="jumpToStep()"
        >
        <button class="jump-button" (click)="jumpToStep()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 4L12 20M12 4L18 10M12 4L6 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Jump to Step
        </button>
      </div>
      <button class="unlock-all-button" (click)="unlockAll()">
        @if (isUnlockedAll) {
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17 11H7C5.89543 11 5 11.8954 5 13V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V13C19 11.8954 18.1046 11 17 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Re-Lock
        } @else {
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 11H7C5.89543 11 5 11.8954 5 13V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V13C19 11.8954 18.1046 11 17 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Unlock All
        }
      </button>
      <button class="reset-button" (click)="openResetModal()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z" stroke="currentColor" stroke-width="2"/>
          <path d="M16 8L8 16M8 8L16 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        Reset
      </button>
    </div>
  </header>

  <main class="main-content">
    <div class="steps-container">
      @for (step of steps; track step.id; let i = $index) {
        <app-step
          [step]="step"
          [stepNumber]="i + 1"
          (toggleExpand)="toggleStep($event)"
          (subTaskToggled)="onSubTaskToggle()"
        ></app-step>
      }
    </div>
  </main>

  <footer class="footer">
    <p>Built with Angular | Total Steps: {{ steps.length }}</p>
  </footer>

  <!-- Reset Confirmation Modal -->
  @if (showResetModal) {
    <div class="modal-overlay" (click)="closeResetModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2 class="modal-title">Reset All Progress?</h2>
        </div>
        <div class="modal-body">
          <p>This will clear all completed tasks and saved progress. This action cannot be undone.</p>
        </div>
        <div class="modal-footer">
          <button class="modal-button cancel-button" (click)="closeResetModal()">Cancel</button>
          <button class="modal-button confirm-button" (click)="confirmReset()">Reset</button>
        </div>
      </div>
    </div>
  }
</div>
